<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no">
  <title>AIS MAP | p.p_githubpage</title>
  <style>
    html,
	body {
      padding: 0;
      margin: 0;
      height: 100%;
      width: 100%;
    }

	#toparea {
		height: 12%;
		width: 100%;
		background: #66B3FF;
	}

	#funcbottun {
        position: absolute;
        top: 12%;
		height: 88%;
        width: 10%;
		float: left;
		background: #F0F0F0;
	}

    #viewDiv {
        top: 12%;
		height: 88%;
        width: 90%;
		float: right;
    }

	.buttonbase {
		height:15%; 
		border-radius:10% 10% 10% 10%;
		border-color:#ADADAD;
		border-style:solid;
		background:#ADADAD;
		margin:3;
	}

	.buttonword {
		height:100%;
		display:flex;
		align-items:center;
		justify-content:center;
		color:white;
	}

	.buttonopen {
		height:94%;
		border-radius:10% 10% 10% 10%;
		border-color:#7B7B7B;
		border-style:solid;
		background:#7B7B7B;
	}

  </style>

  <!--<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>-->
  <link rel="stylesheet" href="https://js.arcgis.com/4.19/esri/themes/light/main.css">
  <script src="https://js.arcgis.com/4.19/"></script>

  <script>
const ariver_chen="AAPKcdf1a16eb48d4510909ddc6fab400767UzktCkf_9glxAmx1oHcl86nqMsST53dTitvp-ad-2-OKtBCK3OH7PgGFzAwJ-60k";require(["esri/config","esri/Map","esri/views/MapView","esri/layers/MapImageLayer","esri/layers/GeoJSONLayer","esri/layers/WMTSLayer","esri/layers/FeatureLayer","esri/widgets/LayerList","esri/widgets/ScaleBar","esri/widgets/Legend","esri/widgets/Search","esri/widgets/BasemapToggle","esri/widgets/Compass",],function(k,l,m,c,n,o,e,p,q,r,s,t,u){k.apiKey="AAPKcdf1a16eb48d4510909ddc6fab400767UzktCkf_9glxAmx1oHcl86nqMsST53dTitvp-ad-2-OKtBCK3OH7PgGFzAwJ-60k";let v=new o({url:"http://wmts.nlsc.gov.tw/wmts",activeLayer:{id:"EMAP"}}),b=new l({basemap:"osm"}),a=new m({map:b,center:[120.972177,23.743345,],zoom:6,container:"viewDiv",constraints:{snapToZoom:!1}}),w=new c({url:"https://geosrv.gis.geoinfor.com.tw/arcgis/rest/services/AIS_BASE/MapServer",title:"\u57FA\u672C\u5716\u8CC7"});b.add(w);let f=new c({url:"https://geosrv.gis.geoinfor.com.tw/arcgis/rest/services/RESEARCH/MapServer",title:"\u6F01\u696D\u7814\u7A76"});f.visible=!1,b.add(f);let g=new c({url:"https://geosrv.gis.geoinfor.com.tw/arcgis/rest/services/SEA_TEMPERATURES/MapServer",title:"\u5168\u7403\u6D77\u6EAB",listMode:"hide-children"});g.visible=!1,b.add(g);let h=new c({url:"https://geosrv.gis.geoinfor.com.tw/arcgis/rest/services/WEATHER/MapServer",title:"\u6D77\u6D0B\u5927\u6C23"});h.visible=!1,b.add(h);let i=new c({url:"https://geosrv.gis.geoinfor.com.tw/arcgis/rest/services/AIS_NOW/MapServer",title:"\u8239\u8236\u5373\u6642\u4F4D\u7F6E",listMode:"hide-children"});i.refreshInterval=1,b.add(i);let d=new c({url:"https://geosrv.gis.geoinfor.com.tw/arcgis/rest/services/NOW_CRUISER/MapServer",title:"\u6D77\u5DE1\u8266\u5373\u6642\u4F4D\u7F6E",listMode:"hide-children",popupTemplate:{title:"{\u8239\u8236\u540D\u7A31}"}});d.refreshInterval=1,d.visible=!1,b.add(d),new e({url:"https://services.arcgis.com/V6ZHFr6zdgNZuVG0/arcgis/rest/services/TrailRuns/FeatureServer/0",popupTemplate:{title:"Trail run",content:"{name}"}}),new e({url:"https://services.arcgis.com/V6ZHFr6zdgNZuVG0/arcgis/rest/services/OpenBeerDB/FeatureServer/0",popupTemplate:{title:"{name}",lastEditInfoEnabled:!1,actions:[{id:"find-brewery",image:"https://developers.arcgis.com/javascript/latest/sample-code/popup-custom-action/live/beer.png",title:"Brewery Info"}],content:[{type:"fields",fieldInfos:[{fieldName:"name"},{fieldName:"address1",label:"address"},{fieldName:"city"},{fieldName:"state"},{fieldName:"phone"},{fieldName:"website"}]}]}});let j=new n({url:"https://mpbais.motcmpb.gov.tw/aismpb/tools/geojsonais.ashx",copyright:"mpbais",title:"\u8239\u8236\u5373\u6642\u4F4D\u7F6E",labelingInfo:[{symbol:{type:"text",color:"white",haloColor:"blue",haloSize:1}}],popupTemplate:{title:"{ShipName}",content:[{type:"fields",fieldInfos:[{fieldName:"MMSI"},{fieldName:"ShipName",label:"\u8239\u8236\u540D\u7A31"},{fieldName:"Call_Sign",label:"\u570B\u969B\u547C\u865F"},{fieldName:"IMO_Number"},{fieldName:"SOG",label:"\u8239\u901F(\u7BC0)"},{fieldName:"COG",label:"\u822A\u5411"},{fieldName:"Ship_and_Cargo_Type",label:"\u8239\u8236\u7A2E\u985E"},{fieldName:"Longitude",label:"\u7D93\u5EA6"},{fieldName:"Latitude",label:"\u7DEF\u5EA6"},{fieldName:"Record_Time",label:"\u7D00\u9304\u6642\u9593"},]}]}});j.refreshInterval=.5,j.visible=!1;let x=new s({view:a});a.ui.add(x,"top-right");let y=new u({view:a});a.ui.add(y,"top-left");let z=new p({view:a});a.ui.add(z,{position:"top-left"});let A=new r({view:a});a.ui.add(A,"top-right");let B=new q({view:a,unit:"metric"});a.ui.add(B,"bottom-left");let C=new t({view:a,nextBasemap:{baseLayers:[v]}});a.ui.add(C,"bottom-right")})
  </script>

  <script>
function CheckAlert(){confirm("\u5716\u8CC7\u670D\u52D9\u5C1A\u672A\u7533\u8ACB\u6191\u8B49\u3002\n\u9EDE\u9078\u78BA\u5B9A\u4EE5\u8A2A\u554F\u4E26\u540C\u610F\u670D\u52D9\u9801\u9762\u3002\n\u82E5\u5716\u5C64\u5DF2\u8F09\u5165\u8ACB\u9EDE\u9078\u53D6\u6D88\u3002")&&(window.location="https://geosrv.gis.geoinfor.com.tw/arcgis/rest/services")}
  </script>


</head>

<body onload="CheckAlert()">
  <div id="toparea">
	<div style="width:90%; height:12%; float:left;">
	  <h1>&emsp;AIS 船舶系統</h1>
    </div>

	<!--<div style="float:right; position:relative; display:flex; align-items:center;">
	  <div>
		<div>
          <span>圖層顯示：</span>
          <button id="layeropen" onclick="layerFopen()" style="display:none;">關</button>
          <button id="layerclose" onclick="layerFclose()" style="display:inline;">開</button>
        </div>

        <div>
          <span>圖例顯示：</span>
          <button id="symbolopen" onclick="symbolFopen()" style="display:none;">關</button>
          <button id="symbolclose" onclick="symbolFclose()" style="display:inline;">開</button>
        </div>
	  </div>
	</div>-->

  </div>
  <div id="funcbottun">
    <div class="buttonbase">
	  <div id="layeropen" onclick="layerFopen()" style="display:none;">
	    <div class="buttonword">圖層</br>關閉</div>
	  </div>
	  <div id="layerclose" onclick="layerFclose()" style="display:inline;">
	    <div class="buttonopen">
		  <div class="buttonword">圖層</br>顯示</div>
		</div>
	  </div>
	</div>
    <div class="buttonbase">
	  <div id="symbolopen" onclick="symbolFopen()" style="display:none;">
	    <div class="buttonword">圖例</br>關閉</div>
	  </div>
	  <div id="symbolclose" onclick="symbolFclose()" style="display:inline;">
	    <div class="buttonopen">
		  <div class="buttonword">圖例</br>顯示</div>
		</div>
	  </div>
	</div>
  </div>	
  <div id="viewDiv"></div>
  
<script>
function layerFopen(){document.querySelector(".esri-layer-list").style.cssText+="display:block",document.querySelector("#layeropen").style.cssText+="display:none",document.querySelector("#layerclose").style.cssText+="display:inline"}function layerFclose(){document.querySelector(".esri-layer-list").style.cssText+="display:none",document.querySelector("#layerclose").style.cssText+="display:none",document.querySelector("#layeropen").style.cssText+="display:inline"}function symbolFopen(){document.querySelector(".esri-legend").style.cssText+="display:block",document.querySelector("#symbolopen").style.cssText+="display:none",document.querySelector("#symbolclose").style.cssText+="display:inline"}function symbolFclose(){document.querySelector(".esri-legend").style.cssText+="display:none",document.querySelector("#symbolclose").style.cssText+="display:none",document.querySelector("#symbolopen").style.cssText+="display:inline"}
</script>

</body>

</html>
